import{Ac as G,Ba as C,Bb as F,Ca as S,Cb as O,Db as I,Eb as P,Fb as T,Hb as B,Ib as A,Jb as q,M as m,N as p,X as b,Xa as x,Ya as h,Z as d,bb as N,bc as u,da as n,ea as e,fa as c,ka as v,rc as D,sb as E,sc as w,ta as o,tb as a,vb as _,wb as k,x as g,xa as y,yc as V,zb as M}from"./chunk-P2H7JS6J.js";function H(r,f){if(r&1&&(n(0,"option",18),o(1),e()),r&2){let t=f.$implicit;d("value",t.empId),m(),y(" ",t.firstName," ",t.lastName," (",t.employeeCode,") ")}}function j(r,f){r&1&&(n(0,"div",19),o(1," Employee is required. "),e())}var Z=(()=>{class r{constructor(t,l,i){this.fb=t,this.authService=l,this.messageService=i,this.allEmployees=[]}ngOnInit(){this.buildForm(),this.loadEmployees()}buildForm(){this.bankForm=this.fb.group({employeeId:["",a.required],accountHolderName:["",a.required],bankName:["",a.required],accountNumber:["",[a.required,a.pattern(/^\d+$/)]],ifscCode:["",a.required],branch:["",a.required],accountType:["",a.required]})}loadEmployees(){this.authService.getAllEmployees().subscribe({next:t=>{this.allEmployees=t},error:()=>{this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load employees"})}})}onSubmit(){if(this.bankForm.invalid){this.messageService.add({severity:"warn",summary:"Invalid",detail:"Please fill all required fields correctly."});return}let t=this.bankForm.value,l={accountHolderName:t.accountHolderName,bankName:t.bankName,accountNumber:t.accountNumber,ifscCode:t.ifscCode,branch:t.branch,accountType:t.accountType},i=t.employeeId;console.log("About to submit employeeId:",i),this.authService.createBankDetails(i,l).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Success",detail:"Bank details saved successfully."}),this.bankForm.reset()},error:()=>this.messageService.add({severity:"error",summary:"Error",detail:"Failed to save bank details."})})}static{this.\u0275fac=function(l){return new(l||r)(p(B),p(w),p(u))}}static{this.\u0275cmp=g({type:r,selectors:[["app-banking"]],standalone:!0,features:[C([u]),S],decls:45,vars:4,consts:[[1,"container","mt-4"],[3,"ngSubmit","formGroup"],[1,"form-group"],["formControlName","employeeId",1,"form-control"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"form-group","mt-3"],["type","text","formControlName","accountHolderName",1,"form-control"],["type","text","formControlName","bankName",1,"form-control"],["type","text","formControlName","accountNumber",1,"form-control"],["type","text","formControlName","ifscCode",1,"form-control"],["type","text","formControlName","branch",1,"form-control"],["formControlName","accountType",1,"form-control"],["value","SAVINGS"],["value","CURRENT"],[1,"mt-4"],["type","submit",1,"btn","btn-primary",3,"disabled"],[3,"value"],[1,"text-danger"]],template:function(l,i){if(l&1&&(n(0,"div",0)(1,"h2"),o(2,"Add Bank Details"),e(),n(3,"form",1),v("ngSubmit",function(){return i.onSubmit()}),n(4,"div",2)(5,"label"),o(6,"Employee"),e(),n(7,"select",3)(8,"option",4),o(9,"Select Employee"),e(),b(10,H,2,4,"option",5),e(),b(11,j,2,0,"div",6),e(),n(12,"div",7)(13,"label"),o(14,"Account Holder Name"),e(),c(15,"input",8),e(),n(16,"div",7)(17,"label"),o(18,"Bank Name"),e(),c(19,"input",9),e(),n(20,"div",7)(21,"label"),o(22,"Account Number"),e(),c(23,"input",10),e(),n(24,"div",7)(25,"label"),o(26,"IFSC Code"),e(),c(27,"input",11),e(),n(28,"div",7)(29,"label"),o(30,"Branch"),e(),c(31,"input",12),e(),n(32,"div",7)(33,"label"),o(34,"Account Type"),e(),n(35,"select",13)(36,"option",4),o(37,"Select Type"),e(),n(38,"option",14),o(39,"Savings"),e(),n(40,"option",15),o(41,"Current"),e()()(),n(42,"div",16)(43,"button",17),o(44,"Save Bank Details"),e()()()()),l&2){let s;m(3),d("formGroup",i.bankForm),m(7),d("ngForOf",i.allEmployees),m(),d("ngIf",((s=i.bankForm.get("employeeId"))==null?null:s.invalid)&&((s=i.bankForm.get("employeeId"))==null?null:s.touched)),m(32),d("disabled",i.bankForm.invalid)}},dependencies:[N,x,h,A,M,P,T,E,I,_,k,q,F,O,D,V,G],styles:[".bank-form[_ngcontent-%COMP%], .bank-list[_ngcontent-%COMP%]{max-width:800px;margin:20px auto;padding:20px;background:#f0f4f8;border-radius:8px;box-shadow:0 0 10px #0000001a}.bank-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .bank-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:20px;text-align:center}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:15px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:8px;box-sizing:border-box}button[_ngcontent-%COMP%]{margin-right:10px;padding:8px 16px;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer}button[_ngcontent-%COMP%]:last-child{background-color:#6c757d}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px}table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #ccc}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;text-align:center}"]})}}return r})();export{Z as BankingComponent};
